<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cognitive & Brain Structure Explorer</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Custom Styles -->
    <link href="/static/css/styles.css" rel="stylesheet">
</head>
<body class="bg-light">
    <div class="d-flex flex-column flex-md-row min-vh-100">
        <!-- Sidebar Navigation -->
        <nav class="sidebar bg-white border-end p-4">
            <h2 class="mb-4 text-primary">Explorer</h2>
            <ul class="nav flex-column nav-pills" id="mainNav" role="tablist">
                <li class="nav-item mb-2">
                    <button class="nav-link active" id="cognitive-tab" data-bs-toggle="pill" data-bs-target="#cognitive-content" type="button" role="tab" aria-controls="cognitive-content" aria-selected="true">
                        <i class="bi bi-lightbulb"></i> Cognitive Processes
                    </button>
                </li>
                <li class="nav-item">
                    <button class="nav-link" id="brain-tab" data-bs-toggle="pill" data-bs-target="#brain-content" type="button" role="tab" aria-controls="brain-content" aria-selected="false">
                        <i class="bi bi-diagram-3"></i> Brain Structures
                    </button>
                </li>
            </ul>
            <div class="mt-5">
                <div id="connectionStatus" class="alert alert-warning" role="alert">
                    Database not connected. Please provide connection details.
                </div>
            </div>
        </nav>
        <!-- Main Content -->
        <main class="flex-fill p-4">
            <div class="tab-content" id="viewerTabsContent">
                <!-- Cognitive Processes Tab -->
                <div class="tab-pane fade show active" id="cognitive-content" role="tabpanel" aria-labelledby="cognitive-tab">
                    <div class="row g-4">
                        <div class="col-md-4">
                            <label for="searchInput" class="form-label fw-bold">Search Cognitive Process</label>
                            <input type="text" id="searchInput" class="form-control mb-3" placeholder="e.g. Working Memory" aria-label="Search cognitive process" disabled>
                            <div id="results" class="list-group"></div>
                        </div>
                        <div class="col-md-8">
                            <div id="details" class="details-card"></div>
                        </div>
                    </div>
                </div>
                <!-- Brain Structures Tab -->
                <div class="tab-pane fade" id="brain-content" role="tabpanel" aria-labelledby="brain-tab">
                    <div class="row g-4">
                        <div class="col-md-4">
                            <label for="brainSearchInput" class="form-label fw-bold">Search Brain Structure</label>
                            <input type="text" id="brainSearchInput" class="form-control mb-3" placeholder="e.g. Hippocampus" aria-label="Search brain structure" disabled>
                            <div id="brainResults" class="list-group"></div>
                            <div id="hierarchyModelContainer" class="mt-4 d-none">
                                <label for="hierarchyModelSelect" class="form-label">Hierarchy Model</label>
                                <select id="hierarchyModelSelect" class="form-select"></select>
                            </div>
                        </div>
                        <div class="col-md-8">
                            <div id="brainDetails" class="details-card"></div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>
    <!-- Database Connection Modal -->
    <div class="modal fade" id="dbConnectionModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="dbConnectionModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="dbConnectionModalLabel">Database Connection</h5>
                </div>
                <div class="modal-body">
                    <form id="dbConnectionForm">
                        <div class="mb-3">
                            <label for="dbHost" class="form-label">Host</label>
                            <input type="text" class="form-control" id="dbHost" placeholder="localhost" required>
                        </div>
                        <div class="mb-3">
                            <label for="dbPort" class="form-label">Port</label>
                            <input type="text" class="form-control" id="dbPort" placeholder="5432" required>
                        </div>
                        <div class="mb-3">
                            <label for="dbUsername" class="form-label">Username</label>
                            <input type="text" class="form-control" id="dbUsername" placeholder="postgres" required>
                        </div>
                        <div class="mb-3">
                            <label for="dbPassword" class="form-label">Password</label>
                            <input type="password" class="form-control" id="dbPassword" required>
                        </div>
                        <div class="mb-3">
                            <label for="dbName" class="form-label">Database Name</label>
                            <input type="text" class="form-control" id="dbName" placeholder="postgres" required>
                        </div>
                        <div id="connectionError" class="alert alert-danger d-none" role="alert"></div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" id="connectButton">Connect</button>
                </div>
            </div>
        </div>
    </div>
    <!-- Bootstrap Bundle with Popper and Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="/static/js/app.js"></script>
</body>
</html>